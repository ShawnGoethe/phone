<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <title>phones</title>
</head>

<body>
    <!--vue-ssr-outlet-->
    <div id="app">
        <template>
            <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" @select="handleSelect">
                <el-submenu index="1">
                    <template slot="title">我的工作台</template>
                    <el-menu-item index="1-1">选项1</el-menu-item>
                    <el-menu-item index="1-2">选项2</el-menu-item>
                    <el-menu-item index="1-3">选项3</el-menu-item>
                </el-submenu>
            </el-menu>
            <div class="line"></div>
            <el-table :data=phoneData style="width: 100%">
                <!-- <el-table-column prop="id" label="序号"> </el-table-column> -->
                <el-table-column prop="name" label="名字" width="150"> </el-table-column>
                <el-table-column prop="brand" label="品牌" width="80" :filters=brand :filter-method="filterHandler">
                </el-table-column>
                <el-table-column prop="inch" label="屏幕" width="50"> </el-table-column>
                <el-table-column prop="nfc" label="NFC" width="50"> </el-table-column>
                <el-table-column prop="dualSpeaker" label="双扬" width="50"> </el-table-column>
                <el-table-column prop="headphonePlug" label="耳机孔" width="80"> </el-table-column>
                <el-table-column prop="battery" label="电量" width="50"> </el-table-column>
                <el-table-column prop="charging" label="充电" width="60"> </el-table-column>
                <el-table-column prop="frontCamera" label="前摄" width="80"> </el-table-column>
                <el-table-column prop="rearCamera" label="后摄个数" width="80"> </el-table-column>
                <el-table-column prop="rearMax" label="后摄最高" width="80"> </el-table-column>
                <el-table-column prop="frontMax" label="前摄最高" width="80"> </el-table-column>
                <el-table-column prop="cpu" label="cpu" width="150"> </el-table-column>
                <el-table-column prop="cg" label="通信" width="50"> </el-table-column>
                <el-table-column prop="price" label="价格" width="100"> </el-table-column>
                <el-table-column prop="nowPrice" label="现在价格" width="100"> </el-table-column>
                <el-table-column prop="desc" type="textarea" label="介绍" width="150"> </el-table-column>
                <!-- <el-table-column label="操作">
                    <template slot-scope="scope">
                        <el-button size="mini" @click="handleEdit(scope.$index, scope.row)">编辑</el-button>
                        <el-button size="mini" type="danger" @click="handleDelete(scope.$index, scope.row)">删除
                        </el-button>
                    </template>
                </el-table-column> -->
            </el-table>

        </template>

    </div>
</body>
<!-- 先引入 Vue -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- 引入组件库 -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            message: 'Hello Vue!',
            phoneData: [],
            activeIndex: '1',
            activeIndex2: '1',
            brandFilter: [
                { text: 'Xiaomi', value: 'Xiaomi' },
                { text: 'OPPO', value: 'OPPO' },
                { text: 'Meizu', value: 'Meizu' },
                { text: 'Vivo', value: 'Vivo' },
                { text: 'OnePlus', value: 'OnePlus' },
                { text: 'Lenovo', value: 'Lenovo' },
                { text: 'Apple', value: 'Apple' },
                { text: 'Huawei', value: 'Huawei' },
                { text: 'ASUS', value: 'ASUS' },
                { text: 'BlackBerry', value: 'BlackBerry' },
            ]
        },
        created: function () {
            let that = this;
            axios.get('/phones?limit=30&offset=0').then(function (response) {
                that.phoneData = response.data;
            })
        },
        mounted: function () {

        },
        methods: {
            handleDelete(index, row) {
                axios.put('/phones/' + row.id, {
                    del: 1
                }).then(response => {
                    console.log('response==>', response);
                })
            },
            handleSelect(key, keyPath) {
                console.log(key, keyPath);
            },
            filterHandler(value, row, column) {
                const property = column['property'];
                return row[property] === value;
            },
        }
    })
</script>

</html>