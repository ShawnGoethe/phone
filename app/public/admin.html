<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <title>phones</title>
</head>

<body>
    <!--vue-ssr-outlet-->
    <div id="app">
        <el-form ref="form" :model="form" label-width="80px">
            <el-form-item label="id">
                <el-input v-model="form.id" @change='idChange'></el-input>
            </el-form-item>
            <el-form-item label="手机名称">
                <el-input v-model="form.name"></el-input>
            </el-form-item>
            <el-form-item label="手机品牌">
                <el-select v-model="form.brand" placeholder="请选择品牌">
                    <el-option label="小米" value="Xiaomi"></el-option>
                    <el-option label="魅族" value="Meizu"></el-option>
                    <el-option label="OPPO" value="OPPO"></el-option>
                    <el-option label="Vivo" value="Vivo"></el-option>
                    <el-option label="一加" value="OnePlus"></el-option>
                    <el-option label="联想" value="Lenovo"></el-option>
                    <el-option label="苹果" value="Apple"></el-option>
                    <el-option label="华为" value="Huawei"></el-option>
                    <el-option label="华硕" value="ASUS"></el-option>
                    <el-option label="黑莓" value="BlackBerry"></el-option>
                    <el-option label="海信" value="Hisense"></el-option>
                </el-select>
            </el-form-item>
            <el-form-item label="屏幕尺寸">
                <el-input v-model="form.inch"></el-input>
            </el-form-item>
            <!-- <el-form-item label="cpu">
                <el-radio-group v-model="form.cpu">
                    <el-radio label="Snapdragon 865"></el-radio>
                    <el-radio label="Snapdragon 865 Plus"></el-radio>
                    <el-radio label="Snapdragon 855"></el-radio>
                    <el-radio label="Snapdragon 765G"></el-radio>
                    <el-radio label="Snapdragon 730G"></el-radio>
                    <el-radio label="Snapdragon 710"></el-radio>
                    <el-radio label="Snapdragon 845"></el-radio>
                    <el-radio label="Snapdragon 835"></el-radio>
                    <el-radio label="HUAWEI Kirin 990 5G"></el-radio>

                </el-radio-group>
            </el-form-item> -->
            <el-form-item label="cpu">
                <el-input v-model="form.cpu"></el-input>
            </el-form-item>
            <el-form-item label="前摄最大">
                <el-input v-model="form.frontMax"></el-input>
            </el-form-item>
            <el-form-item label="后摄最大">
                <el-input v-model="form.rearMax"></el-input>
            </el-form-item>
            <el-form-item label="电池容量">
                <el-input v-model="form.battery"></el-input>
            </el-form-item>
            <el-form-item label="充电速率">
                <el-input v-model="form.charging"></el-input>
            </el-form-item>
            <el-form-item label="手机系统">
                <el-input v-model="form.os"></el-input>
            </el-form-item>
            <el-form-item label="后摄数目">
                <el-radio-group v-model="form.rearCamera">
                    <el-radio label="1"></el-radio>
                    <el-radio label="2"></el-radio>
                    <el-radio label="3"></el-radio>
                    <el-radio label="4"></el-radio>
                    <el-radio label="5"></el-radio>
                    <el-radio label="6"></el-radio>
                    <el-radio label="7"></el-radio>
                    <el-radio label="8"></el-radio>
                </el-radio-group>
            </el-form-item>
            <el-form-item label="拥有NFC">
                <el-radio-group v-model="form.nfc">
                    <el-radio label="是"></el-radio>
                    <el-radio label="否"></el-radio>
                </el-radio-group>
            </el-form-item>
            <el-form-item label="通信代数">
                <el-radio-group v-model="form.cg">
                    <el-radio label="4G"></el-radio>
                    <el-radio label="5G"></el-radio>
                </el-radio-group>
            </el-form-item>
            <el-form-item label="双扬声器">
                <el-radio-group v-model="form.dualSpeaker">
                    <el-radio label="是" value=1></el-radio>
                    <el-radio label="否" value=0></el-radio>
                </el-radio-group>
            </el-form-item>
            <el-form-item label="前摄方式">
                <el-radio-group v-model="form.frontCamera">
                    <el-radio label="屏下方式"></el-radio>
                    <el-radio label="刘海方式"></el-radio>
                    <el-radio label="弹出方式"></el-radio>
                    <el-radio label="屏幕上方"></el-radio>
                    <el-radio label="挖单孔"></el-radio>
                    <el-radio label="挖多孔"></el-radio>
                </el-radio-group>
            </el-form-item>
            <el-form-item label="耳机孔">
                <el-radio-group v-model="form.headphonePlug">
                    <el-radio label="3.5mm"></el-radio>
                    <el-radio label="type-c"></el-radio>
                </el-radio-group>
            </el-form-item>
            <el-form-item label="描述">
                <el-input  v-model="form.desc"></el-input>
            </el-form-item>
            <el-form-item label="发布价格">
                <el-input v-model="form.price"></el-input>
            </el-form-item>
            <el-form-item label="现在价格">
                <el-input v-model="form.nowPrice"></el-input>
            </el-form-item>
            <el-form-item label="iid">
                <el-input v-model="form.iid"></el-input>
            </el-form-item>
            <el-form-item>
                <el-button :plain="true" @click="onSubmit">创建</el-button>
                <el-button :plain="true" @click="updatePhone">更新</el-button>
                <!-- <el-button type="primary" @click="onSubmit">立即创建</el-button> -->
                <!-- <el-button>取消</el-button> -->
            </el-form-item>
        </el-form>
    </div>
</body>
<!-- 先引入 Vue -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- 引入组件库 -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    // import axios from './axios.js';
    new Vue({
        el: '#app',
        data() {
            return {
                cpuData: [],
                form: {
                    id: '',
                    name: '',
                    brand: '',
                    inch: '',
                    battery: '',
                    charging: '',
                    os: '',
                    rearCamera: '',
                    nfc: '',
                    dualSpeaker: '',
                    frontCamera: '',
                    headphonePlug: '',
                    desc: '',
                    price: '',
                    nowPrice: '',
                }
            }
        },
        methods: {
            created: function () {
                let that = this;
                axios.get('/cpu?limit=30&offset=0').then(function (response) {
                    that.cpuData = response.data;
                })
            },
            updatePhone: function () {
                let that = this;
                const { form } = this;
                axios.put('/phones/1', {
                    ...form
                }).then(response => {
                    console.log('response==>', response);
                })
                this.$message('更新成功');
            },
            idChange: function (value) {
                let that = this;
                axios.get('/phones/' + value).then(function (response) {
                    console.log(response.data)
                    // that.form = response.data;
                    if (response.data !== '') {
                        that.form = response.data;
                    } else {
                        that.$message('未找到相关数据');
                        that.form = {
                            id: '', name: '', brand: '', inch: '', battery: '', charging: '', os: '',
                            rearCamera: '', nfc: '', dualSpeaker: '', frontCamera: '', headphonePlug: '', desc: '',
                            price: '', nowPrice: '',
                        }
                    }

                })
            },
            onSubmit() {
                console.log(this.form);
                const { form } = this;
                form.price = Number(form.price);
                form.nowPrice = Number(form.nowPrice);
                delete form.id;
                axios.post('/phones?_csrf=safe', {
                    ...form
                }).then(response => {
                    console.log('response==>', response);
                })
                this.$message('创建成功');
            }
        }
    })
</script>

</html>